<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 æ²–ç¹©å…­å¤©äº”å¤œè‡ªç”±è¡Œå„€è¡¨æ¿</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Chart Container Strict Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom Scrollbar for aesthetic */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Transition utilities */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .active-tab {
            border-bottom: 3px solid #0ea5e9;
            color: #0ea5e9;
            font-weight: 600;
        }
        .inactive-tab {
            border-bottom: 3px solid transparent;
            color: #64748b;
        }
        .inactive-tab:hover {
            color: #334155;
        }
        
        /* Mobile Menu Transitions */
        #mobile-menu {
            transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }
        #mobile-menu.open {
            max-height: 400px; /* Approximate max height */
            opacity: 1;
        }

        /* Map Container */
        .map-wrapper {
            position: relative;
            padding-bottom: 75%; /* 4:3 Aspect Ratio for mobile */
            height: 0;
            overflow: hidden;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        @media (min-width: 768px) {
            .map-wrapper {
                padding-bottom: 56.25%; /* 16:9 for tablet/desktop */
                height: 600px; /* Fixed height for large screens */
                padding-bottom: 0; 
            }
        }
        .map-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
    </style>
    <!-- Chosen Palette: Warm Sand & Ocean Breeze (Slate-50 background, Sky-500 accents, Slate-800 text) -->
</head>
<body class="bg-slate-50 text-slate-800 font-sans leading-relaxed selection:bg-sky-100 selection:text-sky-700">

    <!-- Navigation Bar -->
    <nav class="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-sm border-b border-slate-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                
                <!-- Left: Brand & Title -->
                <div class="flex-shrink-0 flex items-center gap-2 cursor-pointer select-none" onclick="switchTab('overview')">
                    <span class="text-2xl">ğŸŒº</span>
                    <span class="font-bold text-lg sm:text-xl tracking-tight text-slate-700" id="nav-title">æ²–ç¹© 2026</span>
                </div>
                
                <!-- Center: Desktop Tabs (Hidden on Mobile) -->
                <div class="hidden md:flex flex-1 justify-center mx-2">
                    <div class="flex space-x-6">
                        <button onclick="switchTab('overview')" id="tab-btn-overview" class="active-tab px-3 py-4 text-sm font-medium transition-colors whitespace-nowrap" data-key="tab_overview">ç¸½è¦½</button>
                        <button onclick="switchTab('itinerary')" id="tab-btn-itinerary" class="inactive-tab px-3 py-4 text-sm font-medium transition-colors whitespace-nowrap" data-key="tab_itinerary">æ¯æ—¥è¡Œç¨‹</button>
                        <button onclick="switchTab('map')" id="tab-btn-map" class="inactive-tab px-3 py-4 text-sm font-medium transition-colors whitespace-nowrap" data-key="tab_map">åœ°åœ–</button>
                        <button onclick="switchTab('budget')" id="tab-btn-budget" class="inactive-tab px-3 py-4 text-sm font-medium transition-colors whitespace-nowrap" data-key="tab_budget">é ç®—</button>
                        <button onclick="switchTab('prep')" id="tab-btn-prep" class="inactive-tab px-3 py-4 text-sm font-medium transition-colors whitespace-nowrap" data-key="tab_prep">æº–å‚™</button>
                    </div>
                </div>

                <!-- Right: Language & Hamburger -->
                <div class="flex items-center gap-3">
                    <!-- Language Switcher -->
                    <button onclick="toggleLanguage()" class="flex items-center gap-1 bg-slate-100 hover:bg-slate-200 text-slate-600 px-3 py-1.5 rounded-full text-xs font-bold transition-colors border border-slate-200 select-none">
                        <span class="text-base">ğŸŒ</span>
                        <span id="lang-label">ZH</span>
                    </button>

                    <!-- Mobile Menu Button (Visible on Mobile Only) -->
                    <button id="mobile-menu-btn" onclick="toggleMobileMenu()" class="md:hidden p-2 rounded-md text-slate-500 hover:text-slate-700 hover:bg-slate-100 focus:outline-none transition-colors">
                        <!-- Hamburger Icon -->
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu Dropdown -->
        <div id="mobile-menu" class="md:hidden bg-white border-t border-slate-100">
            <div class="px-2 pt-2 pb-3 space-y-1 shadow-lg">
                <button onclick="switchTab('overview')" id="mobile-tab-btn-overview" class="block w-full text-left px-3 py-3 rounded-md text-base font-medium text-sky-600 bg-sky-50" data-key="tab_overview">ç¸½è¦½</button>
                <button onclick="switchTab('itinerary')" id="mobile-tab-btn-itinerary" class="block w-full text-left px-3 py-3 rounded-md text-base font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-50" data-key="tab_itinerary">æ¯æ—¥è¡Œç¨‹</button>
                <button onclick="switchTab('map')" id="mobile-tab-btn-map" class="block w-full text-left px-3 py-3 rounded-md text-base font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-50" data-key="tab_map">åœ°åœ–</button>
                <button onclick="switchTab('budget')" id="mobile-tab-btn-budget" class="block w-full text-left px-3 py-3 rounded-md text-base font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-50" data-key="tab_budget">é ç®—</button>
                <button onclick="switchTab('prep')" id="mobile-tab-btn-prep" class="block w-full text-left px-3 py-3 rounded-md text-base font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-50" data-key="tab_prep">æº–å‚™</button>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen">

        <!-- SECTION: OVERVIEW -->
        <div id="section-overview" class="fade-in block">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-slate-900 mb-2" data-key="overview_title">æ—…ç¨‹æ¦‚è¦½</h1>
                <p class="text-slate-600 max-w-3xl" data-key="overview_desc">
                    æ­¡è¿ä¾†åˆ°æ‚¨çš„ 2026 æ²–ç¹©å…­å¤©äº”å¤œè‡ªç”±è¡Œå„€è¡¨æ¿ã€‚æ­¤å€å¡Šå½™æ•´äº†æœ€é—œéµçš„èˆªç­èˆ‡ä½å®¿è³‡è¨Šã€‚
                </p>
            </div>

            <!-- Key Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex flex-col items-center justify-center text-center">
                    <div class="text-3xl mb-1">ğŸ“…</div>
                    <div class="text-sm text-slate-500 font-medium" data-key="stat_date">æ—¥æœŸ</div>
                    <div class="font-bold text-slate-800">2026/03/10 - 15</div>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex flex-col items-center justify-center text-center">
                    <div class="text-3xl mb-1">ğŸŒ¡ï¸</div>
                    <div class="text-sm text-slate-500 font-medium" data-key="stat_weather">æ°£æº«</div>
                    <div class="font-bold text-slate-800">18Â°C ~ 23Â°C</div>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex flex-col items-center justify-center text-center">
                    <div class="text-3xl mb-1">ğŸ’´</div>
                    <div class="text-sm text-slate-500 font-medium" data-key="stat_rate">åŒ¯ç‡é ä¼°</div>
                    <div class="font-bold text-slate-800">0.21</div>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex flex-col items-center justify-center text-center">
                    <div class="text-3xl mb-1">ğŸ‘¥</div>
                    <div class="text-sm text-slate-500 font-medium" data-key="stat_mode">æ¨¡å¼</div>
                    <div class="font-bold text-slate-800" data-key="stat_mode_val">è‡ªç”±è¡Œ</div>
                </div>
            </div>

            <!-- Flights -->
            <h2 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2" data-key="flight_title">ğŸ›« èˆªç­è³‡è¨Š</h2>
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <!-- Outbound -->
                <div class="bg-white rounded-2xl shadow-sm border border-sky-100 overflow-hidden relative">
                    <div class="bg-sky-50 px-6 py-3 border-b border-sky-100 flex justify-between items-center">
                        <span class="font-bold text-sky-700" data-key="flight_out_date">å»ç¨‹ | 03/10 (äºŒ)</span>
                        <a href="https://www.tigerairtw.com/zh-tw" target="_blank" class="text-xs bg-sky-200 text-sky-800 px-2 py-1 rounded-full hover:bg-sky-300 transition flex items-center gap-1" data-key="flight_out_code">å°ç£è™èˆª IT230 â†—</a>
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-slate-800">06:35</div>
                                <div class="text-sm text-slate-500" data-key="flight_tpe">æ¡ƒæ©Ÿ T1</div>
                            </div>
                            <div class="flex-1 px-4 flex flex-col items-center">
                                <div class="text-xs text-slate-400 mb-1" data-key="flight_duration_out">ç´„ 1h 20m</div>
                                <div class="w-full h-px bg-slate-300 relative">
                                    <div class="absolute -top-1.5 right-0 text-slate-300">âœˆï¸</div>
                                </div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-slate-800">08:55</div>
                                <div class="text-sm text-slate-500" data-key="flight_oka">é‚£éœ¸ OKA</div>
                            </div>
                        </div>
                        <div class="text-sm bg-orange-50 text-orange-800 p-3 rounded-lg border border-orange-100" data-key="flight_out_note">
                            âš ï¸ 04:30 è«‹å‹™å¿…å®Œæˆæ«ƒå°å ±åˆ°
                        </div>
                    </div>
                </div>

                <!-- Inbound -->
                <div class="bg-white rounded-2xl shadow-sm border border-sky-100 overflow-hidden relative">
                    <div class="bg-sky-50 px-6 py-3 border-b border-sky-100 flex justify-between items-center">
                        <span class="font-bold text-sky-700" data-key="flight_in_date">å›ç¨‹ | 03/15 (æ—¥)</span>
                        <a href="https://www.airasia.com/zh/tw" target="_blank" class="text-xs bg-sky-200 text-sky-800 px-2 py-1 rounded-full hover:bg-sky-300 transition flex items-center gap-1" data-key="flight_in_code">æ³°äºèˆªç©º FD/SL231 â†—</a>
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-slate-800">16:55</div>
                                <div class="text-sm text-slate-500" data-key="flight_oka">é‚£éœ¸ OKA</div>
                            </div>
                            <div class="flex-1 px-4 flex flex-col items-center">
                                <div class="text-xs text-slate-400 mb-1" data-key="flight_duration_in">ç´„ 1h 40m</div>
                                <div class="w-full h-px bg-slate-300 relative">
                                    <div class="absolute -top-1.5 right-0 text-slate-300">âœˆï¸</div>
                                </div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-slate-800">17:35</div>
                                <div class="text-sm text-slate-500" data-key="flight_tpe">æ¡ƒæ©Ÿ TPE</div>
                            </div>
                        </div>
                        <div class="text-sm bg-blue-50 text-blue-800 p-3 rounded-lg border border-blue-100" data-key="flight_in_note">
                            â„¹ï¸ è«‹æ–¼ 14:00 å‰æŠµé”é‚£éœ¸æ©Ÿå ´
                        </div>
                    </div>
                </div>
            </div>

            <!-- Accommodation -->
            <h2 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2" data-key="hotel_title">ğŸ¨ ä½å®¿å®‰æ’</h2>
            <div class="space-y-4">
                <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row gap-4">
                    <div class="flex-shrink-0 bg-indigo-50 w-full md:w-20 h-20 rounded-lg flex items-center justify-center text-3xl">ğŸŒŠ</div>
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-xs font-bold bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded">Day 1-2</span>
                            <h3 class="font-bold text-lg text-slate-800">
                                <a href="https://royalview-churaumi.com/" target="_blank" class="hover:text-sky-600 flex items-center gap-1 transition-colors" data-key="hotel_1_name">Royal View Hotel Churaumi â†—</a>
                            </h3>
                        </div>
                        <p class="text-sm text-slate-600 mb-2">ğŸ“ 938 Ishikawa, Motobu</p>
                        <p class="text-sm text-slate-500" data-key="hotel_1_desc">ç¾éº—æµ·æ°´æ—é¤¨æ—ï¼Œæ­¥è¡Œå¯é”ï¼ŒåŒ—éƒ¨è¡Œç¨‹åŸºåœ°ã€‚</p>
                    </div>
                </div>

                <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row gap-4">
                    <div class="flex-shrink-0 bg-rose-50 w-full md:w-20 h-20 rounded-lg flex items-center justify-center text-3xl">ğŸ›ï¸</div>
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-xs font-bold bg-rose-100 text-rose-700 px-2 py-0.5 rounded">Day 3-5</span>
                            <h3 class="font-bold text-lg text-slate-800">
                                <a href="https://hotel-naha-city.jp/" target="_blank" class="hover:text-sky-600 flex items-center gap-1 transition-colors" data-key="hotel_2_name">Hotel Naha City - Kokusai Street â†—</a>
                            </h3>
                        </div>
                        <p class="text-sm text-slate-600 mb-2">ğŸ“ 1 Chome-29-7 Matsuyama, Naha</p>
                        <p class="text-sm text-slate-500" data-key="hotel_2_desc">é è¿‘åœ‹éš›é€šï¼Œè³¼ç‰©èˆ‡äº¤é€šä¾¿åˆ©ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION: ITINERARY -->
        <div id="section-itinerary" class="hidden fade-in">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-slate-900 mb-2" data-key="itinerary_title">æ¯æ—¥è©³ç´°è¡Œç¨‹</h1>
                <p class="text-slate-600" data-key="itinerary_desc">
                    é»é¸ä¸Šæ–¹çš„æ—¥æœŸæ¨™ç±¤å³å¯åˆ‡æ›æŸ¥çœ‹ç•¶æ—¥çš„æ™‚é–“è»¸ã€‚è¡Œç¨‹å·²æ¨™è¨»ç›¸é—œé€£çµèˆ‡é ä¼°èŠ±è²»ã€‚
                </p>
            </div>

            <!-- Day Selector -->
            <div class="flex space-x-2 overflow-x-auto pb-4 mb-4 no-scrollbar">
                <button onclick="renderDay(1)" id="day-btn-1" class="day-selector active bg-sky-600 text-white px-4 py-2 rounded-full shadow-md text-sm font-bold whitespace-nowrap">Day 1 (3/10)</button>
                <button onclick="renderDay(2)" id="day-btn-2" class="day-selector bg-white text-slate-600 border border-slate-200 px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap hover:bg-slate-50">Day 2 (3/11)</button>
                <button onclick="renderDay(3)" id="day-btn-3" class="day-selector bg-white text-slate-600 border border-slate-200 px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap hover:bg-slate-50">Day 3 (3/12)</button>
                <button onclick="renderDay(4)" id="day-btn-4" class="day-selector bg-white text-slate-600 border border-slate-200 px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap hover:bg-slate-50">Day 4 (3/13)</button>
                <button onclick="renderDay(5)" id="day-btn-5" class="day-selector bg-white text-slate-600 border border-slate-200 px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap hover:bg-slate-50">Day 5 (3/14)</button>
                <button onclick="renderDay(6)" id="day-btn-6" class="day-selector bg-white text-slate-600 border border-slate-200 px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap hover:bg-slate-50">Day 6 (3/15)</button>
            </div>

            <!-- Dynamic Day Content Container -->
            <div id="day-content-container" class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 md:p-8">
                <!-- Content injected by JS -->
            </div>
        </div>

        <!-- SECTION: MAP -->
        <div id="section-map" class="hidden fade-in">
            <div class="mb-6">
                <h1 class="text-3xl font-bold text-slate-900 mb-2" data-key="map_title">è¡Œç¨‹åœ°åœ–</h1>
                <p class="text-slate-600" data-key="map_desc">
                    æ‰€æœ‰æ™¯é»èˆ‡è·¯ç·šçš†å·²æ•´åˆåœ¨ Google My Maps ä¸­ã€‚
                </p>
            </div>
            
            <div class="map-wrapper bg-slate-100">
                <iframe src="https://www.google.com/maps/d/embed?mid=1MtgP2ghQ3aqyh1ip3Cb_ez3Eizm232o&ehbc=2E312F" width="100%" height="480"></iframe>
            </div>
            
            <div class="mt-4 flex gap-2 justify-center">
                <a href="https://www.google.com/maps/d/edit?mid=1MtgP2ghQ3aqyh1ip3Cb_ez3Eizm232o&usp=sharing" target="_blank" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-sky-700 bg-sky-100 hover:bg-sky-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500">
                    <span class="mr-2">ğŸ—ºï¸</span> <span data-key="open_map_btn">åœ¨ Google Maps App é–‹å•Ÿ</span>
                </a>
            </div>
        </div>

        <!-- SECTION: BUDGET -->
        <div id="section-budget" class="hidden fade-in">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-slate-900 mb-2" data-key="budget_title">é ç®—åˆ†æ</h1>
                <p class="text-slate-600" data-key="budget_desc">
                    é ä¼°æ¯äººç¸½èŠ±è²»ç´„ $33,000 ~ $35,000 TWDã€‚è«‹æº–å‚™è¶³å¤ æ—¥å¹£ç¾é‡‘ã€‚
                </p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8 items-start">
                <!-- Chart Section -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                    <h3 class="text-lg font-bold text-slate-700 mb-4 text-center" data-key="budget_chart_title">è²»ç”¨åˆ†ä½ˆæ¯”ä¾‹ (TWD)</h3>
                    <div class="chart-container">
                        <canvas id="budgetChart"></canvas>
                    </div>
                    <p class="text-xs text-center text-slate-400 mt-4" data-key="budget_note">* é¤è²»ç‚ºæ¦‚ä¼°å€¼ï¼Œä¾å€‹äººæ¶ˆè²»è€Œç•°</p>
                </div>

                <!-- Breakdown Details -->
                <div class="space-y-4">
                    <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-3 border-b pb-2" data-key="budget_list_title">ç´°é …ä¼°ç®— (æ¯äºº)</h3>
                        <ul class="space-y-3 text-sm">
                            <li class="flex justify-between items-center">
                                <span class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-sky-500"></span> <span data-key="cat_flight">âœˆï¸ æ©Ÿç¥¨</span></span>
                                <span class="font-mono font-medium">$8,220</span>
                            </li>
                            <li class="flex justify-between items-center">
                                <span class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-indigo-500"></span> <span data-key="cat_stay">ğŸ¨ ä½å®¿ (5æ™š)</span></span>
                                <span class="font-mono font-medium">$9,550</span>
                            </li>
                            <li class="flex justify-between items-center">
                                <span class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-emerald-500"></span> <span data-key="cat_transport">ğŸšŒ äº¤é€šç¸½è¨ˆ</span></span>
                                <span class="font-mono font-medium">$5,468</span>
                            </li>
                            <li class="flex justify-between items-center border-t border-dashed pt-2">
                                <span class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-amber-500"></span> <span data-key="cat_ticket">ğŸŸï¸ ç¥¨åˆ¸/é–€ç¥¨</span></span>
                                <span class="font-mono font-medium">$1,652</span>
                            </li>
                            <li class="flex justify-between items-center">
                                <span class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-rose-500"></span> <span data-key="cat_food">ğŸ± é¤é£²é ä¼°</span></span>
                                <span class="font-mono font-medium">~$9,000</span>
                            </li>
                            <li class="flex justify-between items-center pt-3 border-t-2 border-slate-100 font-bold text-lg text-slate-800">
                                <span data-key="cat_total">ç¸½è¨ˆé ä¼°</span>
                                <span>~$33,890</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 text-sm text-blue-800">
                        <p class="font-bold mb-1" data-key="cash_tip_title">ğŸ’¡ å»ºè­°æ”œå¸¶æ—¥å¹£</p>
                        <p data-key="cash_tip_desc">éƒ¨åˆ†è€åº—ã€è¨ˆç¨‹è»Šåƒ…æ”¶ç¾é‡‘ã€‚å»ºè­°æº–å‚™ç­‰å€¼ $8,000 ~ $10,000 TWD çš„æ—¥å¹£ç¾é‡‘ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION: PREP -->
        <div id="section-prep" class="hidden fade-in">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-slate-900 mb-2" data-key="prep_title">è¡Œå‰æº–å‚™èˆ‡æª¢æŸ¥</h1>
                <p class="text-slate-600" data-key="prep_desc">
                    å‡ºç™¼å‰è«‹é€ä¸€ç¢ºèªä»¥ä¸‹é …ç›®ã€‚é»æ“Šé …ç›®å¯æ¨™è¨˜ç‚ºå®Œæˆã€‚
                </p>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Interactive Checklist -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                    <h3 class="text-lg font-bold text-slate-700 mb-4" data-key="checklist_title">âœ… å‡ºç™¼å‰æª¢æŸ¥æ¸…å–®</h3>
                    <ul class="space-y-3" id="checklist-container">
                        <!-- JS generated items -->
                    </ul>
                </div>

                <!-- Info Cards -->
                <div class="space-y-6">
                    <!-- Apps & Links -->
                    <div class="bg-indigo-50 p-6 rounded-2xl border border-indigo-100">
                        <h3 class="text-lg font-bold text-indigo-800 mb-3" data-key="app_link_title">ğŸ“± æ¨è–¦ App & é ç´„é€£çµ</h3>
                        <ul class="space-y-3 text-sm text-indigo-900">
                            <li>
                                <a href="https://vjw-lp.digital.go.jp/zh-hant/" target="_blank" class="flex items-start gap-2 hover:bg-indigo-100 p-2 rounded-lg transition-colors group">
                                    <span class="text-lg">ğŸŒ</span>
                                    <div>
                                        <b class="group-hover:text-indigo-700 underline decoration-indigo-300 underline-offset-2">Visit Japan Web</b>
                                        <p class="text-indigo-700/80 text-xs mt-0.5" data-key="link_vjw_desc">å…¥å¢ƒå¯©æŸ¥èˆ‡æµ·é—œç”³å ± QR Code</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.orionbeer.co.jp/brewerytour/" target="_blank" class="flex items-start gap-2 hover:bg-indigo-100 p-2 rounded-lg transition-colors group">
                                    <span class="text-lg">ğŸº</span>
                                    <div>
                                        <b class="group-hover:text-indigo-700 underline decoration-indigo-300 underline-offset-2" data-key="link_orion_title">Orion å•¤é…’å» é ç´„</b>
                                        <p class="text-indigo-700/80 text-xs mt-0.5" data-key="link_orion_desc">åƒè§€å·¥å» éœ€æå‰å®˜ç¶²é ç´„</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.yakiniku-king.jp/shop_search/1854" target="_blank" class="flex items-start gap-2 hover:bg-indigo-100 p-2 rounded-lg transition-colors group">
                                    <span class="text-lg">ğŸ–</span>
                                    <div>
                                        <b class="group-hover:text-indigo-700 underline decoration-indigo-300 underline-offset-2" data-key="link_yakiniku_title">ç‡’è‚‰ç‹ (ä¹…èŒ‚åœ°åº—)</b>
                                        <p class="text-indigo-700/80 text-xs mt-0.5" data-key="link_yakiniku_desc">ç†±é–€æ™‚æ®µå»ºè­°æå‰ä¸€å€‹æœˆé ç´„</p>
                                    </div>
                                </a>
                            </li>
                             <li>
                                <a href="https://www.okinawa-shuttle.co.jp/tc/" target="_blank" class="flex items-start gap-2 hover:bg-indigo-100 p-2 rounded-lg transition-colors group">
                                    <span class="text-lg">ğŸšŒ</span>
                                    <div>
                                        <b class="group-hover:text-indigo-700 underline decoration-indigo-300 underline-offset-2">OAS Bus</b>
                                        <p class="text-indigo-700/80 text-xs mt-0.5" data-key="link_oas_desc">æ©Ÿå ´æ¥é§å·´å£«é ç´„</p>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <!-- Emergency -->
                    <div class="bg-rose-50 p-6 rounded-2xl border border-rose-100">
                        <h3 class="text-lg font-bold text-rose-800 mb-3" data-key="emergency_title">ğŸ†˜ ç·Šæ€¥è¯çµ¡</h3>
                        <div class="space-y-2 text-sm text-rose-900">
                            <div class="flex justify-between border-b border-rose-200 pb-1">
                                <span data-key="emergency_ambulance">æ•‘è­·è»Š / ç«è­¦</span>
                                <span class="font-mono font-bold">119</span>
                            </div>
                            <div class="flex justify-between border-b border-rose-200 pb-1">
                                <span data-key="emergency_police">è­¦å¯Ÿ</span>
                                <span class="font-mono font-bold">110</span>
                            </div>
                            <div class="pt-2">
                                <span class="block font-bold mb-1" data-key="emergency_office">å°åŒ—é§æ—¥ç¶“æ¿Ÿæ–‡åŒ–ä»£è¡¨è™•é‚£éœ¸åˆ†è™•</span>
                                <span class="block font-mono">098-862-7008</span>
                                <span class="block font-mono text-xs mt-1">Emergency: 090-1942-1107</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        // --- Translations ---
        const translations = {
            'zh-TW': {
                nav_title: "æ²–ç¹© 2026",
                tab_overview: "ç¸½è¦½", tab_itinerary: "æ¯æ—¥è¡Œç¨‹", tab_map: "åœ°åœ–", tab_budget: "é ç®—", tab_prep: "æº–å‚™",
                
                overview_title: "æ—…ç¨‹æ¦‚è¦½",
                overview_desc: "æ­¡è¿ä¾†åˆ°æ‚¨çš„ 2026 æ²–ç¹©å…­å¤©äº”å¤œè‡ªç”±è¡Œå„€è¡¨æ¿ã€‚æ­¤å€å¡Šå½™æ•´äº†æœ€é—œéµçš„èˆªç­èˆ‡ä½å®¿è³‡è¨Šã€‚",
                stat_date: "æ—¥æœŸ", stat_weather: "æ°£æº«", stat_rate: "åŒ¯ç‡é ä¼°", stat_mode: "æ¨¡å¼", stat_mode_val: "è‡ªç”±è¡Œ",
                
                flight_title: "ğŸ›« èˆªç­è³‡è¨Š", flight_out_date: "å»ç¨‹ | 03/10 (äºŒ)", flight_out_code: "å°ç£è™èˆª IT230 â†—",
                flight_tpe: "æ¡ƒæ©Ÿ TPE", flight_oka: "é‚£éœ¸ OKA", flight_duration_out: "ç´„ 1h 20m", flight_duration_in: "ç´„ 1h 40m",
                flight_out_note: "âš ï¸ 04:30 è«‹å‹™å¿…å®Œæˆæ«ƒå°å ±åˆ°", flight_in_date: "å›ç¨‹ | 03/15 (æ—¥)", flight_in_code: "æ³°äºèˆªç©º FD/SL231 â†—",
                flight_in_note: "â„¹ï¸ è«‹æ–¼ 14:00 å‰æŠµé”é‚£éœ¸æ©Ÿå ´",
                
                hotel_title: "ğŸ¨ ä½å®¿å®‰æ’", hotel_1_name: "Royal View Hotel Churaumi â†—", hotel_1_desc: "ç¾éº—æµ·æ°´æ—é¤¨æ—ï¼Œæ­¥è¡Œå¯é”ï¼ŒåŒ—éƒ¨è¡Œç¨‹åŸºåœ°ã€‚",
                hotel_2_name: "Hotel Naha City - Kokusai Street â†—", hotel_2_desc: "é è¿‘åœ‹éš›é€šï¼Œè³¼ç‰©èˆ‡äº¤é€šä¾¿åˆ©ã€‚",

                itinerary_title: "æ¯æ—¥è©³ç´°è¡Œç¨‹", itinerary_desc: "é»é¸ä¸Šæ–¹çš„æ—¥æœŸæ¨™ç±¤å³å¯åˆ‡æ›æŸ¥çœ‹ç•¶æ—¥çš„æ™‚é–“è»¸ã€‚",
                
                map_title: "è¡Œç¨‹åœ°åœ–", map_desc: "æ‰€æœ‰æ™¯é»èˆ‡è·¯ç·šçš†å·²æ•´åˆåœ¨ Google My Maps ä¸­ã€‚", open_map_btn: "åœ¨ Google Maps App é–‹å•Ÿ",

                budget_title: "é ç®—åˆ†æ", budget_desc: "é ä¼°æ¯äººç¸½èŠ±è²»ç´„ $33,000 ~ $35,000 TWDã€‚",
                budget_chart_title: "è²»ç”¨åˆ†ä½ˆæ¯”ä¾‹ (TWD)", budget_note: "* é¤è²»ç‚ºæ¦‚ä¼°å€¼ï¼Œä¾å€‹äººæ¶ˆè²»è€Œç•°",
                budget_list_title: "ç´°é …ä¼°ç®— (æ¯äºº)",
                cat_flight: "âœˆï¸ æ©Ÿç¥¨", cat_stay: "ğŸ¨ ä½å®¿ (5æ™š)", cat_transport: "ğŸšŒ äº¤é€šç¸½è¨ˆ", cat_ticket: "ğŸŸï¸ ç¥¨åˆ¸/é–€ç¥¨", cat_food: "ğŸ± é¤é£²é ä¼°", cat_total: "ç¸½è¨ˆé ä¼°",
                cash_tip_title: "ğŸ’¡ å»ºè­°æ”œå¸¶æ—¥å¹£", cash_tip_desc: "éƒ¨åˆ†è€åº—ã€è¨ˆç¨‹è»Šåƒ…æ”¶ç¾é‡‘ã€‚å»ºè­°æº–å‚™ $8,000~$10,000 TWD ç­‰å€¼æ—¥å¹£ã€‚",

                prep_title: "è¡Œå‰æº–å‚™èˆ‡æª¢æŸ¥", prep_desc: "å‡ºç™¼å‰è«‹é€ä¸€ç¢ºèªä»¥ä¸‹é …ç›®ã€‚",
                checklist_title: "âœ… å‡ºç™¼å‰æª¢æŸ¥æ¸…å–®",
                app_link_title: "ğŸ“± æ¨è–¦ App & é ç´„é€£çµ", link_vjw_desc: "å…¥å¢ƒå¯©æŸ¥èˆ‡æµ·é—œç”³å ± QR Code",
                link_orion_title: "Orion å•¤é…’å» é ç´„", link_orion_desc: "åƒè§€å·¥å» éœ€æå‰å®˜ç¶²é ç´„",
                link_yakiniku_title: "ç‡’è‚‰ç‹ (ä¹…èŒ‚åœ°åº—)", link_yakiniku_desc: "ç†±é–€æ™‚æ®µå»ºè­°æå‰ä¸€å€‹æœˆé ç´„",
                link_oas_desc: "æ©Ÿå ´æ¥é§å·´å£«é ç´„",
                emergency_title: "ğŸ†˜ ç·Šæ€¥è¯çµ¡", emergency_ambulance: "æ•‘è­·è»Š / ç«è­¦", emergency_police: "è­¦å¯Ÿ", emergency_office: "å°åŒ—é§æ—¥ç¶“æ¿Ÿæ–‡åŒ–ä»£è¡¨è™•é‚£éœ¸åˆ†è™•",

                // Checklist Items
                chk_passport: "è­·ç…§ (æ•ˆæœŸéœ€ 6 å€‹æœˆä»¥ä¸Š)", chk_vjw: "VJW ç™»éŒ„ (å…¥å¢ƒ QR Code)", chk_flight_tix: "æ©Ÿç¥¨æ†‘è­‰å­˜å…¥æ‰‹æ©Ÿ",
                chk_hotel_tix: "ä½å®¿æ†‘è­‰å­˜å…¥æ‰‹æ©Ÿ", chk_bus_res: "é ç´„ç¢ºèª: OAS å·´å£«", chk_car_res: "é ç´„ç¢ºèª: åŒ…è»Šå¸æ©Ÿ",
                chk_orion_res: "é ç´„ç¢ºèª: Orion å•¤é…’å» ", chk_tour_res: "é ç´„ç¢ºèª: å—éƒ¨è§€å…‰å·´å£«", chk_sim: "é–‹é€šç¶²å¡/æ¼«éŠ",
                chk_cash: "æº–å‚™æ—¥å¹£ç¾é‡‘", chk_license: "é§•ç…§æ—¥æ–‡è­¯æœ¬ (å‚™ç”¨)",

                // Chart Labels
                chart_flight: "æ©Ÿç¥¨", chart_stay: "ä½å®¿", chart_transport: "äº¤é€š", chart_ticket: "ç¥¨åˆ¸", chart_food: "é¤é£²"
            },
            'ja-JP': {
                nav_title: "æ²–ç¸„ 2026",
                tab_overview: "æ¦‚è¦", tab_itinerary: "æ—¥ç¨‹", tab_map: "åœ°å›³", tab_budget: "äºˆç®—", tab_prep: "æº–å‚™",
                
                overview_title: "æ—…ã®æ¦‚è¦",
                overview_desc: "2026å¹´æ²–ç¸„5æ³Š6æ—¥ã®å€‹äººæ—…è¡Œãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ã‚ˆã†ã“ãã€‚ãƒ•ãƒ©ã‚¤ãƒˆã¨å®¿æ³Šã®é‡è¦æƒ…å ±ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚",
                stat_date: "æ—¥ç¨‹", stat_weather: "æ°—æ¸©", stat_rate: "ãƒ¬ãƒ¼ãƒˆäºˆæ¸¬", stat_mode: "ãƒ¢ãƒ¼ãƒ‰", stat_mode_val: "å€‹äººæ—…è¡Œ",
                
                flight_title: "ğŸ›« ãƒ•ãƒ©ã‚¤ãƒˆæƒ…å ±", flight_out_date: "å¾€è·¯ | 03/10 (ç«)", flight_out_code: "ã‚¿ã‚¤ã‚¬ãƒ¼ã‚¨ã‚¢ IT230 â†—",
                flight_tpe: "å°åŒ—æ¡ƒåœ’ TPE", flight_oka: "é‚£è¦‡ OKA", flight_duration_out: "ç´„ 1æ™‚é–“20åˆ†", flight_duration_in: "ç´„ 1æ™‚é–“40åˆ†",
                flight_out_note: "âš ï¸ 04:30 ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ç· åˆ‡", flight_in_date: "å¾©è·¯ | 03/15 (æ—¥)", flight_in_code: "ã‚¿ã‚¤ãƒ»ã‚¨ã‚¢ã‚¢ã‚¸ã‚¢ FD/SL231 â†—",
                flight_in_note: "â„¹ï¸ 14:00ã¾ã§ã«ç©ºæ¸¯åˆ°ç€æ¨å¥¨",
                
                hotel_title: "ğŸ¨ å®¿æ³Šå…ˆ", hotel_1_name: "ãƒ­ã‚¤ãƒ¤ãƒ«ãƒ“ãƒ¥ãƒ¼ãƒ›ãƒ†ãƒ«ç¾ã‚‰æµ· â†—", hotel_1_desc: "ç¾ã‚‰æµ·æ°´æ—é¤¨ã®éš£ã€å¾’æ­©åœå†…ã€‚åŒ—éƒ¨ã®æ‹ ç‚¹ã«æœ€é©ã€‚",
                hotel_2_name: "ãƒ›ãƒ†ãƒ«é‚£è¦‡ã‚·ãƒ†ã‚£ å›½éš›é€šã‚Š â†—", hotel_2_desc: "å›½éš›é€šã‚Šè¿‘ãã€è²·ã„ç‰©ã‚„äº¤é€šã«ä¾¿åˆ©ã€‚",

                itinerary_title: "è©³ç´°ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«", itinerary_desc: "ä¸Šã®æ—¥ä»˜ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã€å½“æ—¥ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚",
                
                map_title: "æ—…è¡Œãƒãƒƒãƒ—", map_desc: "ã™ã¹ã¦ã®è¦³å…‰ã‚¹ãƒãƒƒãƒˆã¨ãƒ«ãƒ¼ãƒˆã¯Googleãƒã‚¤ãƒãƒƒãƒ—ã«çµ±åˆã•ã‚Œã¦ã„ã¾ã™ã€‚", open_map_btn: "Googleãƒãƒƒãƒ—ã§é–‹ã",

                budget_title: "äºˆç®—åˆ†æ", budget_desc: "ä¸€äººå½“ãŸã‚Šã®ç·è²»ç”¨ã¯ç´„ 33,000 ~ 35,000 TWD (ç´„ 16~17ä¸‡å††) ã§ã™ã€‚",
                budget_chart_title: "è²»ç”¨å†…è¨³ (TWD)", budget_note: "* é£Ÿè²»ã¯å€‹äººã®æ¶ˆè²»ã«ã‚ˆã‚Šç•°ãªã‚Šã¾ã™",
                budget_list_title: "è©³ç´°è¦‹ç©ã‚‚ã‚Š (ä¸€äººå½“ãŸã‚Š)",
                cat_flight: "âœˆï¸ èˆªç©ºåˆ¸", cat_stay: "ğŸ¨ å®¿æ³Š (5æ³Š)", cat_transport: "ğŸšŒ äº¤é€šè²»åˆè¨ˆ", cat_ticket: "ğŸŸï¸ å…¥å ´åˆ¸/ãƒ‘ã‚¹", cat_food: "ğŸ± é£Ÿè²»(æ¦‚ç®—)", cat_total: "åˆè¨ˆäºˆæƒ³",
                cash_tip_title: "ğŸ’¡ ç¾é‡‘ã®æº–å‚™", cash_tip_desc: "ä¸€éƒ¨ã®è€èˆ—ã‚„ã‚¿ã‚¯ã‚·ãƒ¼ã¯ç¾é‡‘ã®ã¿ã§ã™ã€‚æ—¥æœ¬å††ã‚’ã”ç”¨æ„ãã ã•ã„ã€‚",

                prep_title: "äº‹å‰æº–å‚™ãƒ»ãƒã‚§ãƒƒã‚¯", prep_desc: "å‡ºç™ºå‰ã«ä»¥ä¸‹ã®é …ç›®ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",
                checklist_title: "âœ… å‡ºç™ºå‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ",
                app_link_title: "ğŸ“± ã‚¢ãƒ—ãƒª & äºˆç´„ãƒªãƒ³ã‚¯", link_vjw_desc: "å…¥å›½å¯©æŸ»ãƒ»ç¨é–¢ç”³å‘Š QRã‚³ãƒ¼ãƒ‰",
                link_orion_title: "ã‚ªãƒªã‚ªãƒ³ãƒ“ãƒ¼ãƒ«å·¥å ´äºˆç´„", link_orion_desc: "å·¥å ´è¦‹å­¦ã¯äº‹å‰äºˆç´„ãŒå¿…è¦ã§ã™",
                link_yakiniku_title: "ç„¼è‚‰ãã‚“ã (ä¹…èŒ‚åœ°åº—)", link_yakiniku_desc: "æ··é›‘æ™‚ã¯1ãƒ¶æœˆå‰ã®äºˆç´„ã‚’æ¨å¥¨",
                link_oas_desc: "ç©ºæ¸¯ã‚·ãƒ£ãƒˆãƒ«ãƒã‚¹äºˆç´„",
                emergency_title: "ğŸ†˜ ç·Šæ€¥é€£çµ¡å…ˆ", emergency_ambulance: "æ•‘æ€¥è»Š / æ¶ˆé˜²", emergency_police: "è­¦å¯Ÿ", emergency_office: "å°åŒ—é§æ—¥çµŒæ¸ˆæ–‡åŒ–ä»£è¡¨å‡¦ é‚£è¦‡åˆ†å‡¦",

                // Checklist Items
                chk_passport: "ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ (æœ‰åŠ¹æœŸé™6ãƒ¶æœˆä»¥ä¸Š)", chk_vjw: "VJWç™»éŒ² (å…¥å›½QR)", chk_flight_tix: "Eãƒã‚±ãƒƒãƒˆä¿å­˜",
                chk_hotel_tix: "å®¿æ³Šãƒã‚¦ãƒãƒ£ãƒ¼ä¿å­˜", chk_bus_res: "äºˆç´„ç¢ºèª: OASãƒã‚¹", chk_car_res: "äºˆç´„ç¢ºèª: è²¸åˆ‡ã‚¿ã‚¯ã‚·ãƒ¼",
                chk_orion_res: "äºˆç´„ç¢ºèª: ã‚ªãƒªã‚ªãƒ³ãƒ“ãƒ¼ãƒ«", chk_tour_res: "äºˆç´„ç¢ºèª: å—éƒ¨ãƒã‚¹ãƒ„ã‚¢ãƒ¼", chk_sim: "SIM/ãƒ­ãƒ¼ãƒŸãƒ³ã‚°è¨­å®š",
                chk_cash: "æ—¥æœ¬å††ã®æº–å‚™", chk_license: "å…è¨±è¨¼ç¿»è¨³ (äºˆå‚™)",

                // Chart Labels
                chart_flight: "èˆªç©ºåˆ¸", chart_stay: "å®¿æ³Š", chart_transport: "äº¤é€š", chart_ticket: "ãƒã‚±ãƒƒãƒˆ", chart_food: "é£Ÿè²»"
            }
        };

        // --- Data ---
        let currentLang = 'zh-TW';

        const itineraryData = {
            'zh-TW': {
                1: {
                    title: "åˆæŠµæ²–ç¹©ãƒ»å‰é€²åŒ—éƒ¨",
                    date: "03/10 (äºŒ)",
                    events: [
                        { time: "04:30", icon: "ğŸ›‚", title: "æ¡ƒåœ’æ©Ÿå ´å ±åˆ°", desc: "ç¬¬ä¸€èˆªå»ˆ IT230 (06:35èµ·é£›)", link: "https://www.tigerairtw.com/zh-tw" },
                        { time: "08:55", icon: "ğŸ›¬", title: "æŠµé”é‚£éœ¸æ©Ÿå ´", desc: "å‡ºé—œã€å¯„æ”¾è¡Œæã€æ©Ÿå ´æ—©é¤(A&W/è±¬è‚‰è›‹é£¯ç³°)", cost: "1,000", link: "https://www.naha-airport.co.jp/zh-hant/" },
                        { time: "11:50", icon: "â›©ï¸", title: "æ³¢ä¸Šå®® & æµ·ç˜", desc: "åƒæ‹œã€è²·æ›¸åŒ…å¾¡å®ˆã€è¸æµª (åœç•™ 2hr)", cost: "2,000 (å«è»Šè³‡)", link: "http://naminouegu.jp/" },
                        { time: "14:40", icon: "ğŸšŒ", title: "æ­ä¹˜ OAS æ¥é§å·´å£«", desc: "éœ€é ç´„ï¼Œå‰å¾€ç¾éº—æµ·ç´€å¿µå…¬åœ’å‰ç«™", cost: "2,500", link: "https://www.okinawa-shuttle.co.jp/tc/" },
                        { time: "18:00", icon: "ğŸ¨", title: "Royal View Check-in", desc: "æ™šé¤æ–¼é£¯åº—è‡ªåŠ©é¤æˆ–é™„è¿‘å±…é…’å±‹", cost: "3,000", link: "https://royalview-churaumi.com/" }
                    ]
                },
                2: {
                    title: "åŒ—éƒ¨åŒ…è»Šä¸€æ—¥éŠ (10H)",
                    date: "03/11 (ä¸‰)",
                    events: [
                        { time: "08:30", icon: "ğŸš™", title: "åŒ…è»Šå‡ºç™¼", desc: "è»Šå…§åš´ç¦é£²é£Ÿï¼Œæ™‚é–“æ§åˆ¶åš´æ ¼", cost: "12,000 (åˆ†æ”¤)", link: null },
                        { time: "09:15", icon: "ğŸŒŠ", title: "å¤å®‡åˆ©å³¶", desc: "å¤å®‡åˆ©å¤§æ©‹ã€å¿ƒå½¢å²©ã€è¦è¦é£¯ (åœç•™ 3hr)", cost: "1,500", link: "https://kourijima.info/" },
                        { time: "13:30", icon: "ğŸ˜", title: "è¬åº§æ¯›", desc: "Funpasså…¥å ´ï¼Œè±¡é¼»å²©çµ•æ™¯ (åœç•™ 1.5hr)", cost: "0 (Funpass)", link: "https://www.manzamo.jp/" },
                        { time: "15:50", icon: "ğŸº", title: "Orion å•¤é…’å» ", desc: "16:00 å ´æ¬¡ (å‹™å¿…æº–æ™‚)ï¼Œé§•é§›ä¸å¯é£²é…’", cost: "500", link: "https://www.orionbeer.co.jp/brewerytour/" },
                        { time: "18:20", icon: "ğŸŸ", title: "æ™šé¤ï¼šæµ·é‚¦ä¸¸æœ¬åº—", desc: "æµ·äººæ–™ç†ï¼Œå¯èƒ½éœ€æ’éšŠ", cost: "3,000", link: "https://kaihou-maru.com/" }
                    ]
                },
                3: {
                    title: "æ°´æ—é¤¨ãƒ»ç§»å‹•è‡³é‚£éœ¸",
                    date: "03/12 (å››)",
                    events: [
                        { time: "09:40", icon: "ğŸ‹", title: "ç¾éº—æµ·æ°´æ—é¤¨", desc: "é»‘æ½®ä¹‹æµ·ã€æµ·è±šåŠ‡å ´ (åœç•™ 5hr)ï¼Œåˆé¤é¤¨å…§è§£æ±º", cost: "3,000 (å«é¤)", link: "https://churaumi.okinawa/tc/" },
                        { time: "15:15", icon: "ğŸšŒ", title: "å±±åŸæ€¥è¡Œå·´å£«", desc: "å‰å¾€ç¸£å»³å‰ç«™ (County Office Station)", cost: "2,000", link: "https://yanbaru-expressbus.com/" },
                        { time: "18:30", icon: "ğŸ¨", title: "Hotel Naha City Check-in", desc: "é è¿‘åœ‹éš›é€š", cost: "0", link: "https://hotel-naha-city.jp/" },
                        { time: "19:00", icon: "ğŸ¥©", title: "æ™šé¤ï¼šç‡’è‚‰ç‹/å±‹å°æ‘", desc: "ç‡’è‚‰ç‹å»ºè­°æå‰ä¸€å€‹æœˆé ç´„", cost: "4,000", link: "https://www.yakiniku-king.jp/" },
                        { time: "21:00", icon: "ğŸ¸", title: "çºŒæ”¤ï¼šEl Lequio", desc: "æ¸…å§å°é…Œ", cost: "2,000", link: "https://www.instagram.com/el_lequio_official/" }
                    ]
                },
                4: {
                    title: "ç¾åœ‹æ‘æ‚ é–’éŠ",
                    date: "03/13 (äº”)",
                    events: [
                        { time: "08:00", icon: "ğŸ£", title: "æ—©é¤ï¼šæ³Šæ¸¯é­šå¸‚å ´", desc: "æ–°é®®ç”Ÿé­šç‰‡ã€ç”Ÿè ”", cost: "1,500", link: "http://www.tomariiyumachi.com/" },
                        { time: "13:27", icon: "ğŸšŒ", title: "å‰å¾€ç¾åœ‹æ‘", desc: "æ­ä¹˜ 28 è™Ÿå…¬è»Š", cost: "800", link: "https://www.okinawa-americanvillage.com/" },
                        { time: "14:30", icon: "ğŸ½ï¸", title: "åˆé¤ï¼šCalif Kitchen", desc: "æµ·æ™¯åŠ å·é¢¨é¤å»³", cost: "2,000", link: "https://thecalifkitchen.okinawa/" },
                        { time: "16:00", icon: "ğŸ¡", title: "ç¾åœ‹æ‘æ•£ç­–", desc: "Blue Seal å†°æ·‡æ·‹ã€æ—¥è½æµ·ç˜ã€åŒ—è°·å…¬åœ’", cost: "1,000", link: null },
                        { time: "18:00", icon: "ğŸŒ…", title: "Transit Cafe", desc: "æ¬£è³æ—¥è½", cost: "2,000", link: "https://transitcafe-okinawa.com/" },
                        { time: "20:20", icon: "ğŸš•", title: "è¨ˆç¨‹è»Šå›é‚£éœ¸", desc: "ç´„ 45 åˆ†é˜", cost: "5,000 (æ•´è»Š)", link: null }
                    ]
                },
                5: {
                    title: "å—éƒ¨è§€å…‰å·´å£«ä¸€æ—¥éŠ",
                    date: "03/14 (å…­)",
                    events: [
                        { time: "08:45", icon: "ğŸš©", title: "é›†åˆï¼šç¸£å»³å‰", desc: "Blue Seal Palette ä¹…èŒ‚åœ°åº—å‰ï¼Œæº–æ™‚å‡ºç™¼", cost: "7,500 (åœ˜è²»)", link: null },
                        { time: "09:30", icon: "ğŸ¯", title: "æ²–ç¹©ä¸–ç•Œæ–‡åŒ–ç‹åœ‹", desc: "ç‰æ³‰æ´é˜ä¹³çŸ³ã€æ¯’è›‡åšç‰©é¤¨", cost: "0 (å«)", link: "https://www.gyokusendo.co.jp/okinawaworld/" },
                        { time: "13:40", icon: "ğŸ ", title: "DMM æ°´æ—é¤¨ & iias", desc: "å½±åƒæŠ€è¡“æ°´æ—é¤¨ï¼Œæ—æœ‰å•†å ´", cost: "2,400", link: "https://kariyushi-aquarium.com/tc/" },
                        { time: "16:00", icon: "âœˆï¸", title: "ç€¨é•·å³¶ Umikaji Terrace", desc: "å¸Œè‡˜é¢¨å»ºç¯‰ã€çœ‹é£›æ©Ÿã€å¹¸ç¦é¬†é¤…", cost: "1,500", link: "https://www.umikajiterrace.com/" },
                        { time: "18:15", icon: "ğŸ”¥", title: "æ™šé¤ï¼šç‚‰ã°ãŸç„¼ æ³‰å´", desc: "é«”é©—çˆç«¯ç‡’", cost: "3,500", link: "https://tabelog.com/okinawa/A4701/A470101/47000350/" }
                    ]
                },
                6: {
                    title: "æœ€å¾Œæ¡è²· & å›å®¶",
                    date: "03/15 (æ—¥)",
                    events: [
                        { time: "08:00", icon: "ğŸš", title: "æ—©é¤ï¼šé¢¨æ—ç«å±±", desc: "æ—¥å¼å®šé£Ÿ", cost: "1,200", link: null },
                        { time: "10:15", icon: "ğŸ›ï¸", title: "åœ‹éš›é€šè¡åˆº", desc: "å”å‰è¨¶å¾·ã€ç‰§å¿—å¸‚å ´ã€ä¼´æ‰‹ç¦®", cost: "10,000+", link: "https://naha-kokusaidori.okinawa/tw/" },
                        { time: "13:30", icon: "ğŸš", title: "å‰å¾€é‚£éœ¸æ©Ÿå ´", desc: "åˆé¤åœ¨æ©Ÿå ´è§£æ±º (è±¬è‚‰é£¯ç³°/æ‹‰éºµ)", cost: "1,000", link: "https://www.naha-airport.co.jp/zh-hant/" },
                        { time: "16:55", icon: "ğŸ›«", title: "å›ç¨‹èµ·é£›", desc: "æ³°äºèˆªç©º Flight 231", cost: "0", link: "https://www.airasia.com/zh/tw" },
                        { time: "19:00", icon: "ğŸ ", title: "å¹³å®‰æŠµé”", desc: "æ¡ƒåœ’æ©Ÿå ´è§£æ•£", cost: "0", link: null }
                    ]
                }
            },
            'ja-JP': {
                1: {
                    title: "æ²–ç¸„åˆ°ç€ãƒ»åŒ—éƒ¨ã¸",
                    date: "03/10 (ç«)",
                    events: [
                        { time: "04:30", icon: "ğŸ›‚", title: "æ¡ƒåœ’ç©ºæ¸¯ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³", desc: "T1 ã‚¿ã‚¤ã‚¬ãƒ¼ã‚¨ã‚¢ IT230 (06:35ç™º)", link: "https://www.tigerairtw.com/jp" },
                        { time: "08:55", icon: "ğŸ›¬", title: "é‚£è¦‡ç©ºæ¸¯åˆ°ç€", desc: "å…¥å›½ã€è·ç‰©é ã‘ã€æœé£Ÿ (A&W/ãƒãƒ¼ã‚¯ãŸã¾ã”)", cost: "1,000", link: "https://www.naha-airport.co.jp/" },
                        { time: "11:50", icon: "â›©ï¸", title: "æ³¢ä¸Šå®® & ãƒ“ãƒ¼ãƒ", desc: "å‚æ‹ã€ãŠå®ˆã‚Šè³¼å…¥ã€æ•£ç­– (2æ™‚é–“)", cost: "2,000 (äº¤é€šè¾¼)", link: "http://naminouegu.jp/" },
                        { time: "14:40", icon: "ğŸšŒ", title: "OASãƒã‚¹ä¹—è»Š", desc: "äºˆç´„åˆ¶ã€æµ·æ´‹åšå…¬åœ’å‰ã¸ç§»å‹•", cost: "2,500", link: "https://www.okinawa-shuttle.co.jp/" },
                        { time: "18:00", icon: "ğŸ¨", title: "ãƒ­ã‚¤ãƒ¤ãƒ«ãƒ“ãƒ¥ãƒ¼ ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³", desc: "å¤•é£Ÿã¯ãƒ›ãƒ†ãƒ«ãƒ“ãƒ¥ãƒƒãƒ•ã‚§ã¾ãŸã¯è¿‘éš£å±…é…’å±‹", cost: "3,000", link: "https://royalview-churaumi.com/" }
                    ]
                },
                2: {
                    title: "åŒ—éƒ¨è²¸åˆ‡ã‚¿ã‚¯ã‚·ãƒ¼è¦³å…‰ (10H)",
                    date: "03/11 (æ°´)",
                    events: [
                        { time: "08:30", icon: "ğŸš™", title: "å‡ºç™º", desc: "è»Šå†…é£²é£Ÿå³ç¦ã€æ™‚é–“ã¯å³å®ˆ", cost: "12,000 (å‰²å‹˜)", link: null },
                        { time: "09:15", icon: "ğŸŒŠ", title: "å¤å®‡åˆ©å³¶", desc: "å¤å®‡åˆ©å¤§æ©‹ã€ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã€ã‚¬ãƒ¼ãƒªãƒƒã‚¯ã‚·ãƒ¥ãƒªãƒ³ãƒ—", cost: "1,500", link: "https://kourijima.info/" },
                        { time: "13:30", icon: "ğŸ˜", title: "ä¸‡åº§æ¯›", desc: "Funpasså…¥å ´ã€çµ¶æ™¯ã‚¹ãƒãƒƒãƒˆ", cost: "0 (Funpass)", link: "https://www.manzamo.jp/" },
                        { time: "15:50", icon: "ğŸº", title: "ã‚ªãƒªã‚ªãƒ³ãƒ“ãƒ¼ãƒ«å·¥å ´", desc: "16:00 å› (æ™‚é–“å³å®ˆ)ã€é‹è»¢æ‰‹ç¦é…’", cost: "500", link: "https://www.orionbeer.co.jp/brewerytour/" },
                        { time: "18:20", icon: "ğŸŸ", title: "å¤•é£Ÿï¼šæµ·é‚¦ä¸¸ æœ¬åº—", desc: "æµ·äººæ–™ç†ã€è¡Œåˆ—ã®å¯èƒ½æ€§ã‚ã‚Š", cost: "3,000", link: "https://kaihou-maru.com/" }
                    ]
                },
                3: {
                    title: "æ°´æ—é¤¨ãƒ»é‚£è¦‡ã¸ç§»å‹•",
                    date: "03/12 (æœ¨)",
                    events: [
                        { time: "09:40", icon: "ğŸ‹", title: "ç¾ã‚‰æµ·æ°´æ—é¤¨", desc: "é»’æ½®ã®æµ·ã€ã‚¤ãƒ«ã‚«ã‚·ãƒ§ãƒ¼ (5æ™‚é–“æ»åœ¨)ã€ãƒ©ãƒ³ãƒã¯é¤¨å†…", cost: "3,000 (é£Ÿäº‹è¾¼)", link: "https://churaumi.okinawa/" },
                        { time: "15:15", icon: "ğŸšŒ", title: "ã‚„ã‚“ã°ã‚‹æ€¥è¡Œãƒã‚¹", desc: "çœŒåºå‰é§…ã¸ç§»å‹•", cost: "2,000", link: "https://yanbaru-expressbus.com/" },
                        { time: "18:30", icon: "ğŸ¨", title: "é‚£è¦‡ã‚·ãƒ†ã‚£ ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³", desc: "å›½éš›é€šã‚Šè¿‘ã", cost: "0", link: "https://hotel-naha-city.jp/" },
                        { time: "19:00", icon: "ğŸ¥©", title: "å¤•é£Ÿï¼šç„¼è‚‰ãã‚“ã/å±‹å°æ‘", desc: "ç„¼è‚‰ãã‚“ãã¯1ãƒ¶æœˆå‰äºˆç´„æ¨å¥¨", cost: "4,000", link: "https://www.yakiniku-king.jp/" },
                        { time: "21:00", icon: "ğŸ¸", title: "äºŒæ¬¡ä¼šï¼šEl Lequio", desc: "ã‚«ã‚¯ãƒ†ãƒ«ãƒãƒ¼", cost: "2,000", link: "https://www.instagram.com/el_lequio_official/" }
                    ]
                },
                4: {
                    title: "ã‚¢ãƒ¡ãƒªã‚«ãƒ³ãƒ“ãƒ¬ãƒƒã‚¸æ•£ç­–",
                    date: "03/13 (é‡‘)",
                    events: [
                        { time: "08:00", icon: "ğŸ£", title: "æœé£Ÿï¼šæ³Šã„ã‚†ã¾ã¡", desc: "æ–°é®®ãªåˆºèº«ã€ç”Ÿç‰¡è £", cost: "1,500", link: "http://www.tomariiyumachi.com/" },
                        { time: "13:27", icon: "ğŸšŒ", title: "ã‚¢ãƒ¡ãƒªã‚«ãƒ³ãƒ“ãƒ¬ãƒƒã‚¸ã¸", desc: "28ç•ªãƒã‚¹ä¹—è»Š", cost: "800", link: "https://www.okinawa-americanvillage.com/" },
                        { time: "14:30", icon: "ğŸ½ï¸", title: "æ˜¼é£Ÿï¼šCalif Kitchen", desc: "ã‚ªãƒ¼ã‚·ãƒ£ãƒ³ãƒ“ãƒ¥ãƒ¼ ã‚«ãƒªãƒ•ã‚©ãƒ«ãƒ‹ã‚¢ã‚¹ã‚¿ã‚¤ãƒ«", cost: "2,000", link: "https://thecalifkitchen.okinawa/" },
                        { time: "16:00", icon: "ğŸ¡", title: "ãƒ“ãƒ¬ãƒƒã‚¸æ•£ç­–", desc: "ãƒ–ãƒ«ãƒ¼ã‚·ãƒ¼ãƒ«ã‚¢ã‚¤ã‚¹ã€ã‚µãƒ³ã‚»ãƒƒãƒˆãƒ“ãƒ¼ãƒ", cost: "1,000", link: null },
                        { time: "18:00", icon: "ğŸŒ…", title: "Transit Cafe", desc: "ã‚µãƒ³ã‚»ãƒƒãƒˆãƒ‡ã‚£ãƒŠãƒ¼", cost: "2,000", link: "https://transitcafe-okinawa.com/" },
                        { time: "20:20", icon: "ğŸš•", title: "ã‚¿ã‚¯ã‚·ãƒ¼ã§é‚£è¦‡ã¸", desc: "ç´„45åˆ†", cost: "5,000 (1å°)", link: null }
                    ]
                },
                5: {
                    title: "å—éƒ¨ãƒã‚¹ãƒ„ã‚¢ãƒ¼",
                    date: "03/14 (åœŸ)",
                    events: [
                        { time: "08:45", icon: "ğŸš©", title: "é›†åˆï¼šçœŒåºå‰", desc: "ãƒ‘ãƒ¬ãƒƒãƒˆä¹…èŒ‚åœ° ãƒ–ãƒ«ãƒ¼ã‚·ãƒ¼ãƒ«å‰", cost: "7,500 (ãƒ„ã‚¢ãƒ¼è²»)", link: null },
                        { time: "09:30", icon: "ğŸ¯", title: "ãŠããªã‚ãƒ¯ãƒ¼ãƒ«ãƒ‰", desc: "ç‰æ³‰æ´ã€ãƒãƒ–åšç‰©å…¬åœ’", cost: "0 (è¾¼)", link: "https://www.gyokusendo.co.jp/okinawaworld/" },
                        { time: "13:40", icon: "ğŸ ", title: "DMMã‹ã‚Šã‚†ã—æ°´æ—é¤¨", desc: "æ˜ åƒæŠ€è¡“æ°´æ—é¤¨ã€éš£ã«ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ«", cost: "2,400", link: "https://kariyushi-aquarium.com/" },
                        { time: "16:00", icon: "âœˆï¸", title: "ã‚¦ãƒŸã‚«ã‚¸ãƒ†ãƒ©ã‚¹", desc: "ç€¬é•·å³¶ã€é£›è¡Œæ©Ÿé‘‘è³ã€ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­", cost: "1,500", link: "https://www.umikajiterrace.com/" },
                        { time: "18:15", icon: "ğŸ”¥", title: "å¤•é£Ÿï¼šç‚‰ç«¯ç„¼ã æ³‰å´", desc: "ãƒ­ãƒ¼ã‚«ãƒ«ãªç‚‰ç«¯ç„¼ãä½“é¨“", cost: "3,500", link: "https://tabelog.com/okinawa/A4701/A470101/47000350/" }
                    ]
                },
                6: {
                    title: "æœ€çµ‚æ—¥ãƒ»è²·ã„ç‰©",
                    date: "03/15 (æ—¥)",
                    events: [
                        { time: "08:00", icon: "ğŸš", title: "æœé£Ÿï¼šé¢¨æ—ç«å±±", desc: "å’Œå®šé£Ÿ", cost: "1,200", link: null },
                        { time: "10:15", icon: "ğŸ›ï¸", title: "å›½éš›é€šã‚Š", desc: "ãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ†ã€ç‰§å¿—å¸‚å ´ã€ãŠåœŸç”£", cost: "10,000+", link: "https://naha-kokusaidori.okinawa/" },
                        { time: "13:30", icon: "ğŸš", title: "é‚£è¦‡ç©ºæ¸¯ã¸ç§»å‹•", desc: "æ˜¼é£Ÿã¯ç©ºæ¸¯ã§ (ãƒãƒ¼ã‚¯ãŸã¾ã”/ãƒ©ãƒ¼ãƒ¡ãƒ³)", cost: "1,000", link: "https://www.naha-airport.co.jp/" },
                        { time: "16:55", icon: "ğŸ›«", title: "å¾©è·¯å‡ºç™º", desc: "ã‚¿ã‚¤ãƒ»ã‚¨ã‚¢ã‚¢ã‚¸ã‚¢ Flight 231", cost: "0", link: "https://www.airasia.com/jp/ja" },
                        { time: "19:00", icon: "ğŸ ", title: "å°æ¹¾åˆ°ç€", desc: "æ¡ƒåœ’ç©ºæ¸¯è§£æ•£", cost: "0", link: null }
                    ]
                }
            }
        };

        const checklistKeys = [
            'chk_passport', 'chk_vjw', 'chk_flight_tix', 'chk_hotel_tix',
            'chk_bus_res', 'chk_car_res', 'chk_orion_res', 'chk_tour_res',
            'chk_sim', 'chk_cash', 'chk_license'
        ];

        let currentDay = 1;

        // --- Interaction Logic ---

        function toggleLanguage() {
            currentLang = currentLang === 'zh-TW' ? 'ja-JP' : 'zh-TW';
            
            // Update Toggle Button Text
            const btnText = currentLang === 'zh-TW' ? 'ZH' : 'JP';
            document.getElementById('lang-label').innerText = btnText;

            // Update DOM Elements with data-key
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if (translations[currentLang][key]) {
                    el.innerText = translations[currentLang][key];
                }
            });

            // Re-render Dynamic Content
            renderDay(currentDay);
            renderChecklist();
            updateChart();
        }

        // Toggle Mobile Menu
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('open');
        }

        function switchTab(tabId) {
            // Hide all sections
            document.querySelectorAll('main > div').forEach(el => {
                el.classList.add('hidden');
            });
            // Show selected section
            const target = document.getElementById(`section-${tabId}`);
            if (target) {
                target.classList.remove('hidden');
                // Trigger chart resize if needed
                if (tabId === 'budget' && window.budgetChartInstance) {
                    window.budgetChartInstance.resize();
                }
            }

            // Update nav buttons (Desktop)
            const buttons = ['overview', 'itinerary', 'map', 'budget', 'prep'];
            buttons.forEach(btn => {
                const el = document.getElementById(`tab-btn-${btn}`);
                if (btn === tabId) {
                    el.className = 'active-tab px-3 py-4 text-sm font-medium transition-colors whitespace-nowrap';
                    el.classList.add('text-sky-600', 'border-sky-600');
                } else {
                    el.className = 'inactive-tab px-3 py-4 text-sm font-medium transition-colors whitespace-nowrap';
                }
                
                // Mobile Menu Active State
                const mobileBtn = document.getElementById(`mobile-tab-btn-${btn}`);
                if (mobileBtn) {
                    if (btn === tabId) {
                        mobileBtn.classList.remove('text-slate-600', 'hover:text-slate-800', 'hover:bg-slate-50');
                        mobileBtn.classList.add('text-sky-600', 'bg-sky-50');
                    } else {
                        mobileBtn.classList.add('text-slate-600', 'hover:text-slate-800', 'hover:bg-slate-50');
                        mobileBtn.classList.remove('text-sky-600', 'bg-sky-50');
                    }
                }
            });

            // Close mobile menu if open
            const menu = document.getElementById('mobile-menu');
            if (menu.classList.contains('open')) {
                menu.classList.remove('open');
            }
        }

        function renderDay(dayNum) {
            currentDay = dayNum; // Track current day for lang switch
            const container = document.getElementById('day-content-container');
            const data = itineraryData[currentLang][dayNum];
            
            // Update buttons state
            document.querySelectorAll('.day-selector').forEach(btn => {
                btn.classList.remove('bg-sky-600', 'text-white');
                btn.classList.add('bg-white', 'text-slate-600', 'border', 'border-slate-200');
            });
            const activeBtn = document.getElementById(`day-btn-${dayNum}`);
            if(activeBtn) {
                activeBtn.classList.remove('bg-white', 'text-slate-600', 'border-slate-200');
                activeBtn.classList.add('bg-sky-600', 'text-white');
            }

            // Generate HTML
            let html = `
                <div class="flex items-end justify-between mb-8 border-b border-slate-100 pb-4">
                    <div>
                        <span class="text-sky-600 font-bold tracking-wide uppercase text-sm">Day ${dayNum} - ${data.date}</span>
                        <h2 class="text-2xl font-bold text-slate-800 mt-1">${data.title}</h2>
                    </div>
                </div>
                <div class="relative border-l-2 border-slate-200 ml-3 space-y-8">
            `;

            data.events.forEach(event => {
                const linkHtml = event.link 
                    ? `<a href="${event.link}" target="_blank" class="hover:text-sky-600 hover:underline decoration-sky-300 underline-offset-4 transition-colors">${event.title} â†—</a>` 
                    : event.title;
                
                const costHtml = event.cost
                    ? `<span class="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-600 border border-slate-200 whitespace-nowrap">Â¥${event.cost}</span>`
                    : '';

                html += `
                    <div class="relative pl-8">
                        <div class="absolute -left-2.5 top-0 bg-white border-2 border-sky-500 rounded-full w-5 h-5"></div>
                        <div class="flex flex-col sm:flex-row sm:items-start gap-1 sm:gap-4">
                            <div class="min-w-[70px] font-mono font-bold text-slate-500 pt-0.5">${event.time}</div>
                            <div class="bg-slate-50 p-4 rounded-lg w-full hover:bg-sky-50 transition-colors border border-transparent hover:border-sky-100">
                                <div class="flex justify-between items-start mb-1 gap-2 flex-wrap">
                                    <div class="font-bold text-slate-800 text-lg flex items-center gap-2">
                                        <span>${event.icon}</span> ${linkHtml}
                                    </div>
                                    ${costHtml}
                                </div>
                                <div class="text-slate-600 text-sm">${event.desc}</div>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `</div>`;
            container.innerHTML = html;
        }

        function renderChecklist() {
            const list = document.getElementById('checklist-container');
            let html = '';
            checklistKeys.forEach((key, index) => {
                const text = translations[currentLang][key];
                // Check if already checked (simple persistence in DOM for this demo)
                // In a real app, we'd check a state array. Here we'll just re-render unchecked for simplicity on lang switch
                // to avoid complexity with tracking boolean states across languages without a robust state manager.
                // Or better: Preserve state.
                const isChecked = window.checklistState && window.checklistState[index];
                const bgClass = isChecked ? 'bg-emerald-500 border-emerald-500' : 'border-slate-300';
                const textClass = isChecked ? 'line-through text-slate-400' : 'text-slate-700';
                const checkMark = isChecked ? 'âœ“' : 'âœ“'; // Always char, color hides it
                const checkColor = isChecked ? 'text-white' : 'text-white'; // actually checkmark is white, bg handles visibility

                html += `
                    <li class="flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer transition-colors" onclick="toggleCheck(${index})">
                        <div id="check-box-${index}" class="w-6 h-6 rounded border-2 ${bgClass} flex items-center justify-center text-white transition-colors">
                            ${checkMark}
                        </div>
                        <span id="check-text-${index}" class="${textClass} select-none">${text}</span>
                    </li>
                `;
            });
            list.innerHTML = html;
        }

        // Simple state for checklist to persist across lang switch
        window.checklistState = new Array(checklistKeys.length).fill(false);

        function toggleCheck(index) {
            window.checklistState[index] = !window.checklistState[index];
            const box = document.getElementById(`check-box-${index}`);
            const text = document.getElementById(`check-text-${index}`);
            
            if (window.checklistState[index]) {
                // Checked
                box.classList.remove('border-slate-300');
                box.classList.add('bg-emerald-500', 'border-emerald-500');
                text.classList.remove('text-slate-700');
                text.classList.add('line-through', 'text-slate-400');
            } else {
                // Unchecked
                box.classList.remove('bg-emerald-500', 'border-emerald-500');
                box.classList.add('border-slate-300');
                text.classList.remove('line-through', 'text-slate-400');
                text.classList.add('text-slate-700');
            }
        }

        // --- Init Chart ---
        function initChart() {
            const ctx = document.getElementById('budgetChart').getContext('2d');
            window.budgetChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: getChartLabels(),
                    datasets: [{
                        data: [8220, 9550, 5468, 1652, 9000],
                        backgroundColor: [
                            '#0ea5e9', // Sky 500
                            '#6366f1', // Indigo 500
                            '#10b981', // Emerald 500
                            '#f59e0b', // Amber 500
                            '#f43f5e'  // Rose 500
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true,
                                font: {
                                    family: 'sans-serif',
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` $${context.raw.toLocaleString()} TWD`;
                                }
                            }
                        }
                    },
                    cutout: '65%'
                }
            });
        }

        function getChartLabels() {
            const t = translations[currentLang];
            return [t.chart_flight, t.chart_stay, t.chart_transport, t.chart_ticket, t.chart_food];
        }

        function updateChart() {
            if (window.budgetChartInstance) {
                window.budgetChartInstance.data.labels = getChartLabels();
                window.budgetChartInstance.update();
            }
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDay(1);
            renderChecklist();
            initChart();
            switchTab('overview'); // Start at overview
        });

    </script>
</body>
</html>